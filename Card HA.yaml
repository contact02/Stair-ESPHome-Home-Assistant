type: horizontal-stack
cards:
  # КНОПКА 1: БІЖУЧА СХОДИНКА
  - type: custom:button-card
    entity: select.skhodi_2_poverkh_stairs_current_mode
    name: Біжуча сходинка
    label: Ефект
    show_label: true
    icon: mdi:stairs
    # Використовуємо змінні для легкого редагування ID сенсорів
    variables:
      r_entity: sensor.skhodi_2_poverkh_stairs_saved_red
      g_entity: sensor.skhodi_2_poverkh_stairs_saved_green
      b_entity: sensor.skhodi_2_poverkh_stairs_saved_blue
      target_mode: 'Stairs Steps'
    styles: &common_styles
      card:
        - height: 80px
        - border-radius: 12px
        - background-color: |
            [[[
              const r = (states[variables.r_entity]?.state || 0) * 255;
              const g = (states[variables.g_entity]?.state || 0) * 255;
              const b = (states[variables.b_entity]?.state || 0) * 255;
              return entity.state === variables.target_mode 
                ? `rgba(${r}, ${g}, ${b}, 0.15)` 
                : 'var(--card-background-color)';
            ]]]
        - border: |
            [[[
              const r = (states[variables.r_entity]?.state || 0) * 255;
              const g = (states[variables.g_entity]?.state || 0) * 255;
              const b = (states[variables.b_entity]?.state || 0) * 255;
              return entity.state === variables.target_mode 
                ? `1px solid rgba(${r}, ${g}, ${b}, 0.5)` 
                : '1px solid var(--divider-color)';
            ]]]
      icon:
        - color: |
            [[[
              const r = (states[variables.r_entity]?.state || 0) * 255;
              const g = (states[variables.g_entity]?.state || 0) * 255;
              const b = (states[variables.b_entity]?.state || 0) * 255;
              return entity.state === variables.target_mode 
                ? `rgb(${r}, ${g}, ${b})` 
                : 'var(--disabled-text-color)';
            ]]]
      name:
        - font-size: 14px
        - font-weight: bold
        - justify-self: start
      label:
        - font-size: 11px
        - justify-self: start
        - filter: opacity(0.7)
    tap_action:
      action: call-service
      service: select.select_option
      service_data:
        entity_id: select.skhodi_2_poverkh_stairs_current_mode
        option: Stairs Steps

  # КНОПКА 2: ОДИН КОЛІР
  - type: custom:button-card
    entity: select.skhodi_2_poverkh_stairs_current_mode
    name: Один колір
    label: Постійне
    show_label: true
    icon: mdi:lightbulb-outline
    variables:
      r_entity: sensor.skhodi_2_poverkh_stairs_saved_red
      g_entity: sensor.skhodi_2_poverkh_stairs_saved_green
      b_entity: sensor.skhodi_2_poverkh_stairs_saved_blue
      target_mode: 'Static'
    styles: *common_styles
    tap_action:
      action: call-service
      service: select.select_option
      service_data:
        entity_id: select.skhodi_2_poverkh_stairs_current_mode
        option: Static

  # КНОПКА 3: ВЕСЕЛКА
  - type: custom:button-card
    entity: select.skhodi_2_poverkh_stairs_current_mode
    name: Веселка
    label: Кольори
    show_label: true
    icon: mdi:looks
    variables:
      r_entity: sensor.skhodi_2_poverkh_stairs_saved_red
      g_entity: sensor.skhodi_2_poverkh_stairs_saved_green
      b_entity: sensor.skhodi_2_poverkh_stairs_saved_blue
      target_mode: 'Rainbow'
    styles: *common_styles
    tap_action:
      action: call-service
      service: select.select_option
      service_data:
        entity_id: select.skhodi_2_poverkh_stairs_current_mode
        option: Rainbow
